<p id="notice"><%= notice %></p>

<div class="row panel panel-default">
<table id="processors-table" class="table table-striped table-bordered table-hover dataTable no-footer" role="grid">
  <thead>
    <tr>
      <th>触发</th>
      <th>处理类</th>
      <th>处理方法</th>
      <th>返回类型</th>
      <th width="100px">操作</th>
    </tr>
  </thead>

  <tbody>
    <% @message_processors.each do |message_processor| %>
      <tr>
        <td><%= message_processor.event_key %></td>
        <td><%= message_processor.process_class_name %></td>
        <td><%= message_processor.process_method %></td>
        <td><%= message_processor.result_type %></td>
        <td>
          <%= link_to '显示', 
                                admin_message_processor_path(message_processor), 
                                :class => "btn btn-xs btn-info" %>
          <%= link_to '编辑', 
                                edit_admin_message_processor_path(message_processor),
                                :class => "btn btn-xs btn-primary" %>
          <!-- <%= link_to '删除',
                                admin_message_processor_path(message_processor), 
                                method: :delete, 
                                data: { confirm: 'Are you sure?' },
                                :class => 'btn btn-xs btn-danger' 
          %> -->
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= link_to '添加处理器', new_admin_message_processor_path %>
</div>
<% content_for :scripts do %>
  <script type="text/javascript">
    $('#processors-table').dataTable({
      bAutoWidth: false,
      'oLanguage': {
        "oAria": {
            "sSortAscending": ": 升序排列",
            "sSortDescending": ": 降序排列"
        },
        "oPaginate": {
            "sFirst": "首页",
            "sLast": "末页",
            "sNext": "下页",
            "sPrevious": "上页"
        },
        "sEmptyTable": "没有相关记录",
        "sInfo": "第 _START_ 到 _END_ 条记录，共 _TOTAL_ 条",
        "sInfoEmpty": "第 0 到 0 条记录，共 0 条",
        "sInfoFiltered": "(从 _MAX_ 条记录中检索)",
        "sInfoPostFix": "",
        "sDecimal": "",
        "sThousands": ",",
        "sLengthMenu": "每页显示条数: _MENU_",
        "sLoadingRecords": "正在载入...",
        "sProcessing": "正在载入...",
        "sSearch": "搜索:",
        "sSearchPlaceholder": "",
        "sUrl": "",
        "sZeroRecords": "没有相关记录"
      }
    });
  </script>
<% end %>
