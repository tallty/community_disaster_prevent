<script>
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition,showError);
    lat=position.coords.latitude;
    lon=position.coords.longitude;
  }
  else {
    alert("浏览器不支持获取地理位置");
  }

  function showPosition(position) {
    lat=position.coords.latitude;
    lon=position.coords.longitude;
    location.href = "five_day_weather?lon="+lon+"&lat="+lat;
  }

  function showError(error) {
    switch(error.code) {
      case error.PERMISSION_DENIED:
        alert("用户拒绝获取定位信息");
        break;
      case error.POSITION_UNAVAILABLE:
        alert("未能获取定位信息");
        break;
      case error.TIMEOUT:
        alert("获取用户位置信息超时");
        break;
      case error.UNKNOWN_ERROR:
        alert("未知错误");
        break;
    }
  }
</script>
